CREATE TABLE vulnerability_resolution_definitions
(
    id              bigserial   PRIMARY KEY,
    repository_id   bigint      REFERENCES repositories         NOT NULL,
    context_run_id  bigint                                      NOT NULL,
    id_matchers     jsonb                                       NOT NULL,
    reason          text                                        NOT NULL,
    comment         text                                        NOT NULL,
    archived        boolean     DEFAULT FALSE                   NOT NULL
);

CREATE INDEX IF NOT EXISTS idx_vulnerability_resolution_definitions_repository_id
ON vulnerability_resolution_definitions(repository_id);

CREATE INDEX IF NOT EXISTS idx_vulnerability_resolution_definitions_context_run_id
ON vulnerability_resolution_definitions(context_run_id);
